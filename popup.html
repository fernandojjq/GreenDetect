<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <style>
        /* ========================================
           ESTILOS GENERALES DEL BODY Y ESTRUCTURA
           ======================================== */
        
        /* Body: Define el contenedor principal del popup
           - width: 320px para que sea compacto (tama√±o t√≠pico de popup)
           - font-family: Fuente moderna y legible
           - padding/margin: 0 para aprovechar todo el espacio
           - background-color: Gris muy claro para contraste suave */
        body { 
            width: 320px; 
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; 
            padding: 0; 
            margin: 0; 
            background-color: #f9f9f9; 
        }
        
        /* Header: Barra superior con branding
           - background-color: Azul oscuro (#2c3e50)
           - color: white para contraste legible
           - padding: 15px para dar espaciado interno
           - text-align: center para centrar el t√≠tulo */
        header { 
            background-color: #2c3e50; 
            color: white; 
            padding: 15px; 
            text-align: center; 
        }
        
        /* H2: T√≠tulo del header (GreenDetect)
           - margin: 0 para no a√±adir espacio extra
           - font-size: 18px para que sea visible pero no abrumador */
        h2 { 
            margin: 0; 
            font-size: 18px; 
        }
        
        /* ========================================
           SECCIONES DE CONTENIDO
           ======================================== */
        
        /* Content: Contenedor principal que se muestra/oculta
           - padding: 20px para espaciado interno
           - display: none por defecto (se muestra solo si se encuentra la empresa) */
        #content { 
            padding: 20px; 
            display: none; 
        }
        
        /* Loading: Mensaje mientras se busca la empresa
           - text-align: center para centrar el mensaje
           - padding: 50px para dar espacio visual
           - color: Gris suave para no ser invasivo */
        #loading { 
            text-align: center; 
            padding: 50px; 
            color: #7f8c8d; 
        }

        /* ========================================
           ESTILOS DE LA INFORMACI√ìN DE LA EMPRESA
           ======================================== */
        
        /* Company Name: Nombre de la empresa detectada
           - font-size: 24px para ser prominente
           - font-weight: bold para enfatizar
           - display: block para ocupar l√≠nea completa
           - text-align: center para centrado
           - margin-bottom: 5px para separaci√≥n del siguiente elemento
           - color: Gris oscuro para legibilidad */
        #company-name { 
            font-size: 24px; 
            font-weight: bold; 
            display: block; 
            text-align: center; 
            margin-bottom: 5px; 
            color: #333; 
        }
        
        /* Category Badge: Categor√≠a de la empresa (moda, supermercado, etc)
           - font-size: 12px para ser secundario
           - color: Gris medio para indicar que es informaci√≥n secundaria
           - margin-bottom: 15px para separaci√≥n
           - text-transform: uppercase para √©nfasis
           - letter-spacing: 1px para separaci√≥n elegante */
        #category-badge { 
            display: block; 
            text-align: center; 
            font-size: 12px; 
            color: #7f8c8d; 
            margin-bottom: 15px; 
            text-transform: uppercase; 
            letter-spacing: 1px; 
        }
        
        /* Data Source: Fuente de los datos (d√≥nde se obtuvieron)
           - font-size: 9px para ser muy discreta
           - color: Gris claro para no distraer
           - text-align: center
           - margin-bottom: 10px para separaci√≥n de la puntuaci√≥n */
        #data-source { 
            font-size: 9px; 
            color: #999; 
            text-align: center; 
            margin-bottom: 10px; 
        }

        /* ========================================
           CONTENEDOR DE PUNTUACI√ìN (SCORE)
           ======================================== */
        
        /* Score Container: Caja interactiva que muestra las hojas y puntuaci√≥n
           - display: flex para alineaci√≥n centrada
           - flex-direction: column para apilar elementos verticalmente
           - align-items: center, justify-content: center para centrado total
           - cursor: pointer para indicar que es clickeable
           - padding: 15px para espaciado interno
           - border-radius: 12px para bordes redondeados modernos
           - transition: Animaci√≥n suave al pasar el mouse
           - border: L√≠nea gris clara para definici√≥n
           - background: white para contrastar con fondo gris
           - margin-bottom: 10px para separaci√≥n del panel de detalles */
        #score-container { 
            display: flex; 
            flex-direction: column; 
            align-items: center; 
            justify-content: center;
            cursor: pointer; 
            padding: 15px; 
            border-radius: 12px; 
            transition: transform 0.2s, box-shadow 0.2s;
            border: 1px solid #e0e0e0; 
            background: white; 
            margin-bottom: 10px;
        }
        
        /* Score Container Hover: Efecto visual al pasar el mouse
           - transform: translateY(-2px) para mover la caja hacia arriba
           - box-shadow: Sombra m√°s pronunciada para efecto de elevaci√≥n */
        #score-container:hover { 
            transform: translateY(-2px); 
            box-shadow: 0 4px 8px rgba(0,0,0,0.1); 
        }
        
        /* Leaves Box: Contenedor para las 5 hojas de puntuaci√≥n
           - display: flex para alineaci√≥n horizontal
           - gap: 2px para peque√±a separaci√≥n entre hojas */
        #leaves-box { 
            display: flex; 
            gap: 2px; 
            margin-bottom: 5px; 
        }
        
        /* Leaf Icon: Estilos base para los iconos SVG de hojas
           - width/height: 35px para que sean visibles pero no enormes */
        .leaf-icon { 
            width: 35px; 
            height: 35px; 
        }
        
        /* Leaf Green: Hoja llena/media (contribuye a la puntuaci√≥n)
           - fill: #2ecc71 verde brillante */
        .leaf-green { 
            fill: #2ecc71; 
        }
        
        /* Leaf Gray: Hoja vac√≠a (no alcanzada en la puntuaci√≥n)
           - fill: #dfe6e9 gris claro */
        .leaf-gray { 
            fill: #dfe6e9; 
        }

        /* Score Text: N√∫mero de puntuaci√≥n (0.0 a 5.0)
           - font-size: 36px para ser muy prominente
           - font-weight: 800 para ser muy bold
           - line-height: 1 para que no tenga espacio extra */
        .score-text { 
            font-size: 36px; 
            font-weight: 800; 
            line-height: 1; 
        }
        
        /* Click Hint: Texto que indica que se puede clickear
           - font-size: 11px peque√±o y discreto
           - color: Gris claro para ser sugestivo
           - margin-top: 8px para separaci√≥n
           - text-transform: uppercase para que sea visible
           - font-weight: bold para √©nfasis
           - letter-spacing: 0.5px para mejor legibilidad */
        .click-hint { 
            font-size: 11px; 
            color: #95a5a6; 
            margin-top: 8px; 
            text-transform: uppercase; 
            font-weight: bold; 
            letter-spacing: 0.5px;
        }

        /* ========================================
           PANEL DE DETALLES (DESPLEGABLE)
           ======================================== */
        
        /* Details Panel: Panel que se expande al clickear score-container
           - display: none por defecto (oculto)
           - margin-top: 10px para separaci√≥n
           - background: white para contraste
           - padding: 15px para espaciado interno
           - border-radius: 8px para bordes suaves
           - border: L√≠nea gris para definici√≥n
           - box-shadow: Sombra sutil para profundidad */
        #details-panel { 
            display: none; 
            margin-top: 10px; 
            background: white; 
            padding: 15px; 
            border-radius: 8px; 
            border: 1px solid #eee; 
            box-shadow: 0 2px 5px rgba(0,0,0,0.05); 
        }
        
        /* Reason Text: Explicaci√≥n de por qu√© tiene esa puntuaci√≥n
           - font-size: 13px para ser legible pero secundario
           - color: Gris oscuro para legibilidad
           - line-height: 1.4 para mejor lectura
           - margin-bottom: 15px para separaci√≥n de las barras
           - font-style: italic para diferenciar que es explicaci√≥n */
        #reason-text { 
            font-size: 13px; 
            color: #555; 
            line-height: 1.4; 
            margin-bottom: 15px; 
            font-style: italic; 
        }
        
        /* ========================================
           BARRAS DE PROGRESO
           ======================================== */
        
        /* Bar Row: Cada fila con una barra (Carbono, Trabajo, Materiales)
           - margin-bottom: 10px para separaci√≥n entre barras */
        .bar-row { 
            margin-bottom: 10px; 
        }
        
        /* Bar Background: Fondo gris de la barra
           - background: #ecf0f1 gris muy claro
           - height: 10px para ancho visible
           - border-radius: 5px para bordes redondeados
           - width: 100% para ocupar todo el ancho disponible
           - overflow: hidden para que el relleno respete los bordes */
        .bar-bg { 
            background: #ecf0f1; 
            height: 10px; 
            border-radius: 5px; 
            width: 100%; 
            overflow: hidden; 
        }
        
        /* Bar Fill: Parte coloreada que se llena seg√∫n el porcentaje
           - height: 100% para llenar la altura
           - border-radius: 5px para bordes redondeados
           - transition: Animaci√≥n suave al cargar (1s) */
        .bar-fill { 
            height: 100%; 
            border-radius: 5px; 
            transition: width 1s ease-in-out; 
        }
        
        /* Bar Label: Texto con la m√©trica y el valor (Ej: "Carbono 75/100")
           - font-size: 12px para que sea legible
           - display: flex para alineaci√≥n horizontal
           - justify-content: space-between para separar nombre y valor
           - margin-bottom: 4px para separaci√≥n de la barra
           - font-weight: 600 para que destaque
           - color: Gris oscuro para legibilidad */
        .bar-label { 
            font-size: 12px; 
            display: flex; 
            justify-content: space-between; 
            margin-bottom: 4px; 
            font-weight: 600; 
            color: #555; 
        }

        /* ========================================
           SECCIONES DE CERTIFICACIONES Y RECOMENDACIONES
           ======================================== */
        
        /* Section Title: T√≠tulos para cada secci√≥n (Certificaciones, Alternativas)
           - font-size: 13px para ser prominente pero no abrumador
           - font-weight: bold para √©nfasis
           - margin-top: 20px para separaci√≥n de secciones
           - margin-bottom: 10px para separaci√≥n del contenido
           - border-bottom: 2px solid para subrayado elegante
           - padding-bottom: 5px para espaciado
           - color: Gris oscuro para contraste */
        .section-title { 
            font-size: 13px; 
            font-weight: bold; 
            margin-top: 20px; 
            margin-bottom: 10px; 
            border-bottom: 2px solid #eee; 
            padding-bottom: 5px; 
            color: #333; 
        }
        
        /* Cert Button: Botones de certificaciones (links que se abren)
           - display: inline-block para que se agrupen horizontalmente
           - background: Verde muy claro (#e8f8f5)
           - color: Verde oscuro para texto
           - padding: 4px 10px para tama√±o peque√±o
           - border-radius: 15px para forma de p√≠ldora
           - text-decoration: none para sin subrayado
           - font-size: 11px para que sea peque√±o
           - margin-right: 5px para separaci√≥n entre botones
           - border: Borde verde claro para definici√≥n */
        .cert-btn { 
            display: inline-block; 
            background: #e8f8f5; 
            color: #27ae60; 
            padding: 4px 10px; 
            border-radius: 15px; 
            text-decoration: none; 
            font-size: 11px; 
            margin-right: 5px; 
            border: 1px solid #a2d9ce; 
        }
        
        /* Rec Item: Cada fila de recomendaci√≥n (alternativa sostenible)
           - display: flex para alineaci√≥n horizontal
           - justify-content: space-between para separar nombre y score
           - align-items: center para alineaci√≥n vertical
           - font-size: 13px para legibilidad
           - padding: 8px 0 para espaciado vertical
           - border-bottom: 1px solid para separaci√≥n visual */
        .rec-item { 
            display: flex; 
            justify-content: space-between; 
            align-items: center; 
            font-size: 13px; 
            padding: 8px 0; 
            border-bottom: 1px solid #f9f9f9; 
        }
        
        /* Mini Leaf: Peque√±a hoja que aparece junto al score de recomendaci√≥n
           - width/height: 14px para que sea peque√±a
           - fill: #2ecc71 verde
           - vertical-align: middle para alineaci√≥n con el texto
           - margin-left: 4px para separaci√≥n */
        .mini-leaf { 
            width: 14px; 
            height: 14px; 
            fill: #2ecc71; 
            vertical-align: middle; 
            margin-left: 4px; 
        }

        /* ========================================
           FOOTER
           ======================================== */
        
        /* Footer: Barra inferior con bot√≥n de reporte
           - text-align: center para centrar contenido
           - padding: 15px para espaciado
           - background: Gris muy claro para diferenciaci√≥n
           - margin-top: 20px para separaci√≥n del contenido
           - border-top: 1px solid para l√≠nea divisoria */
        footer { 
            text-align: center; 
            padding: 15px; 
            background: #f4f6f7; 
            margin-top: 20px; 
            border-top: 1px solid #e0e0e0; 
        }
        
        /* Report Button: Bot√≥n para reportar greenwashing
           - background: Rojo oscuro (#e74c3c)
           - color: white para contraste
           - text-decoration: none para sin subrayado
           - padding: 8px 20px para tama√±o visible
           - border-radius: 20px para forma redondeada
           - font-size: 12px para consistencia
           - font-weight: bold para √©nfasis
           - transition: Cambio suave de color al hover */
        .report-btn { 
            background: #e74c3c; 
            color: white; 
            text-decoration: none; 
            padding: 8px 20px; 
            border-radius: 20px; 
            font-size: 12px; 
            font-weight: bold; 
            transition: background 0.3s; 
        }
        
        /* Report Button Hover: Efecto al pasar el mouse
           - background: Rojo m√°s oscuro (#c0392b) */
        .report-btn:hover { 
            background: #c0392b; 
        }

        /* ========================================
           CLASES DE COLOR DIN√ÅMICAS
           ======================================== */
        
        /* Text Color Classes: Cambiar color del texto seg√∫n el score
           - text-red: Puntuaci√≥n baja (rojo peligro)
           - text-yellow: Puntuaci√≥n media (amarillo advertencia)
           - text-green: Puntuaci√≥n alta (verde sostenible) */
        .text-red { 
            color: #e74c3c; 
        }
        .text-yellow { 
            color: #f1c40f; 
        }
        .text-green { 
            color: #27ae60; 
        }

        /* Background Color Classes: Colores de fondo para las barras
           - bg-red: Barra roja para m√©trica baja
           - bg-yellow: Barra amarilla para m√©trica media
           - bg-green: Barra verde para m√©trica alta */
        .bg-red { 
            background-color: #e74c3c; 
        }
        .bg-yellow { 
            background-color: #f1c40f; 
        }
        .bg-green { 
            background-color: #27ae60; 
        }
    </style>
</head>
<body>
    <!-- ========================================
         HEADER (BARRA SUPERIOR)
         ======================================== -->
    <header>
        <!-- T√≠tulo principal de la extensi√≥n -->
        <h2>üåç GreenDetect</h2>
    </header>

    <!-- ========================================
         MENSAJE DE CARGA
         ======================================== -->
    <!-- Se muestra mientras se busca la empresa en la base de datos -->
    <div id="loading">Escaneando...</div>

    <!-- ========================================
         CONTENIDO PRINCIPAL (Se muestra si se encuentra la empresa)
         ======================================== -->
    <div id="content">
        <!-- Nombre de la empresa detectada -->
        <span id="company-name">Nombre</span>
        
        <!-- Categor√≠a de la empresa (moda, supermercado, etc) -->
        <span id="category-badge">Categor√≠a</span>
        
        <!-- Fuente de los datos (de d√≥nde se obtuvo la informaci√≥n) -->
        <div id="data-source"></div>

        <!-- =====================================
             CAJA PRINCIPAL DE PUNTUACI√ìN
             ===================================== -->
        <!-- Esta caja es interactiva: clickear abre/cierra el panel de detalles -->
        <div id="score-container">
            <!-- Contenedor para las 5 hojas (generadas por JavaScript) -->
            <div id="leaves-box">
                <!-- Las hojas se insertan aqu√≠ din√°micamente -->
            </div>
            
            <!-- N√∫mero de puntuaci√≥n (0.0 a 5.0)
                 La clase 'score-text' define tama√±o y estilo base
                 Se le agrega dinamicamente text-red/yellow/green seg√∫n el valor -->
            <span id="score-number" class="score-text">0.0</span>
            
            <!-- Texto sugestivo que indica que se puede clickear -->
            <div class="click-hint">‚ñº Ver detalles</div>
        </div>

        <!-- =====================================
             PANEL DE DETALLES (DESPLEGABLE)
             ===================================== -->
        <!-- Se abre/cierra al clickear score-container -->
        <div id="details-panel">
            <!-- Explicaci√≥n de por qu√© tiene esa puntuaci√≥n -->
            <div id="reason-text"></div>
            
            <!-- Contenedor para las 3 barras de progreso
                 (Carbono, Derechos Laborales, Materiales) -->
            <div id="bars-container"></div>
        </div>

        <!-- =====================================
             SECCI√ìN DE CERTIFICACIONES
             ===================================== -->
        <!-- Se muestra solo si la empresa tiene certificaciones -->
        <div id="certs-section" style="display:none;">
            <div class="section-title">üèÖ Certificaciones</div>
            <!-- Lista de certificaciones (links clickeables) -->
            <div id="certs-list"></div>
        </div>

        <!-- =====================================
             SECCI√ìN DE RECOMENDACIONES
             ===================================== -->
        <!-- Se muestra solo si hay alternativas sostenibles de la misma categor√≠a -->
        <div id="recs-section" style="display:none;">
            <div class="section-title">üí° Alternativas Sostenibles</div>
            <!-- Top 3 empresas mejores de la misma categor√≠a -->
            <div id="recs-list"></div>
        </div>
    </div>

    <!-- ========================================
         FOOTER (BARRA INFERIOR)
         ======================================== -->
    <footer>
        <!-- Bot√≥n para reportar informaci√≥n incorrecta o greenwashing -->
        <a href="https://forms.gle/M2qMTYjpVpaq7os48" class="report-btn">üì¢ Reportar Error</a>
    </footer>

    <!-- ========================================
         SCRIPTS EXTERNOS
         ======================================== -->
    <!-- database.js: Contiene la base de datos companyDB con todas las empresas -->
    <script src="database.js"></script>
    
    <!-- popup.js: L√≥gica principal que detecta la empresa y rellena el contenido -->
    <script src="popup.js"></script>
</body>
</html>